<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Circular / Ring Buffers • ring</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Circular / Ring Buffers">
<meta name="description" content="Circular / ring buffers in R and C. There are a couple of different buffers here with different implementations that represent different trade-offs.">
<meta property="og:description" content="Circular / ring buffers in R and C. There are a couple of different buffers here with different implementations that represent different trade-offs.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">ring</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.7</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="articles/ring.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/ring_applications.html">ring applications</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mrc-ide/ring/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="ring">ring<a class="anchor" aria-label="anchor" href="#ring"></a>
</h1></div>
<!-- badges: start -->

<blockquote>
<p>Ring buffers in R and C</p>
</blockquote>
<p>Ring buffers (or circular buffers) are like arrays that seem circular; data is written and read in a first-in-first-out (FIFO) style, but once allocated subsequent writes do not cause memory allocations. Circular buffers are useful for collecting and processing data streams or for queues (with a fixed maximum size). I use them to implement a solver for delay differential equations in <a href="https://github.com/mrc-ide/dde" class="external-link">dde</a>.</p>
<p>This package provides two implementations of ring buffers:</p>
<ol style="list-style-type: decimal">
<li>
<code>ring_buffer_env</code>: a pure R ring buffer implemented as double linked list (using environments) that is genuinely a ring.</li>
<li>
<code>ring_buffer_bytes</code>: a ring buffer implemented as an array of bytes with a pair of pointers (in C). Each “element” of the array can be one or more bytes, but each must have a fixed size. There are two convenience interfaces:</li>
</ol>
<ul>
<li>
<code>ring_buffer_bytes_translate</code>: for cases where a raw-&gt;R and R-&gt;raw translation functions are provided</li>
<li>
<code>ring_buffer_bytes_typed</code> for cases where each element should correspond to a fixed-length vector of one of R’s core numeric-ish types (<code>logical</code>, <code>integer</code>, <code>numeric</code>, <code>complex</code>)</li>
</ul>
<p>Both buffer types can be used from R, and the code underlying <code>ring_buffer_bytes</code> can also be used compiled code in other packages using R’s <code>LinkingTo:</code> support. A common set of methods is provided, though these do differ in some details.</p>
<p>Both buffer types will refuse to underflow (return elements beyond those that have been written). The behaviour on overflow can be controlled:</p>
<ul>
<li>overwrite old data: (the default), for a fixed-memory FIFO buffer</li>
<li>grow buffer: expand the buffer geometrically to fit required elements (which will require additional memory allocations and copies)</li>
<li>throw error: refuse to overflow</li>
</ul>
<p>Depending on your application, these ring buffers may or may not be faster than manually copying data around in vectors. The benefit of this package rather than doing it by hand is abstracting away a lot of subtle bookkeeping and keeping an interface that is fairly high level. However, for C applications, using <code>ring_buffer_bytes</code> via the C interface (using <code>LinkingTo</code>) is likely to be very fast as it avoids all copies.</p>
<p>See the <a href="https://mrc-ide.github.io/ring/">reference documentation</a> for details.</p>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>The main package vignette (<code><a href="articles/ring.html">vignette("ring")</a></code>) contains an introduction and basic usage.</p>
<p>A second vignette (<code><a href="articles/ring_applications.html">vignette("ring_applications")</a></code>) describes possible data structures using a ring buffer.</p>
<p>The reference documentation is also available <a href="https://mrc-ide.github.io/ring/">online</a>, or from the package.</p>
</div>
<div class="section level2">
<h2 id="license">License<a class="anchor" aria-label="anchor" href="#license"></a>
</h2>
<p>MIT © Imperial College of Science, Technology and Medicine</p>
<p>Please note that this project is released with a <a href="https://mrc-ide.github.io/ring/CONDUCT.html">Contributor Code of Conduct</a>. By participating in this project you agree to abide by its terms.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=ring" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/mrc-ide/ring/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/mrc-ide/ring/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing ring</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Rich FitzJohn <br><small class="roles"> Author, maintainer </small>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.repostatus.org/#active" class="external-link"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active - The project has reached a stable, usable state and is being actively developed."></a></li>
<li><a href="https://github.com/mrc-ide/ring/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/mrc-ide/ring/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/github/mrc-ide/ring?branch=master" class="external-link"><img src="https://codecov.io/github/mrc-ide/ring/coverage.svg?branch=master" alt="codecov.io"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rich FitzJohn.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
